<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACCESS DENIED</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #000;
            color: #00ff00;
            text-align: center;
            padding: 50px;
            overflow: hidden;
        }
        #warningBanner {
            position: relative;
            width: 100%;
            background-color: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 15px;
            font-size: 1.5em;
            font-weight: bold;
            text-shadow: 0 0 5px white;
            border-bottom: 3px solid #ff0000;
        }
        #voteBanner {
            display: none;
            position: relative;
            margin-top: 20px;
            width: 90%;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 15px;
            text-align: center;
            font-size: 1.2em;
            box-shadow: 0 0 5px #00ff00;
        }
        #voteBanner p {
            margin: 5px 0;
        }
        #voteBanner a {
            color: #00ff00;
            font-size: 1em;
            text-decoration: none;
            font-weight: bold;
        }
        h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff00;
            animation: glitch 0.2s infinite alternate;
        }
        p {
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        .signature {
            font-style: italic;
            color: #ffff00;
        }
        #websiteAddress {
            color: #ff0000;
            font-weight: bold;
        }
        #redirectMessage {
            margin-top: 30px;
            display: none;
        }

        /* Glitch Animation for ACCESS DENIED */
        @keyframes glitch {
            0% { text-shadow: 0 0 5px #00ff00; }
            100% { text-shadow: 0 0 15px #00ff00, 2px 2px #ff0000; }
        }
        #accessDenied {
            animation: glitch 0.2s infinite alternate;
        }
    </style>

<script>
    async function checkAccess() {
        try {
            const response = await fetch("/time.json");
            if (!response.ok) throw new Error("Failed to load override time.");
            const data = await response.json();
            
            const overrideTime = new Date(data.completionTime);
            const currentTime = new Date();

            if (currentTime < overrideTime) {
                window.location.href = "/datastream";
            }
        } catch (error) {
            console.error("Error fetching override time:", error);
        }
    }

    checkAccess();
</script>

</head>
<body>

    <!-- Warning Banner at the Top -->
    <div id="warningBanner">⚠ SYSTEM PURIFICATION IN PROGRESS ⚠</div>

    <!-- Vote Banner (Now appears when redirect is OFF) -->
    <div id="voteBanner">
        <p>The digital world has been cleansed. Help us decide the next step!</p>
        <p><a href="http://vote.byte-brigade.giize.com">Vote for the future</a></p>
    </div>

    <h1 id="accessDenied">ACCESS DENIED</h1>

    <p id="message1">This website was deemed unproductive and harmful to digital efficiency.</p>
    <p id="message2">Target website at <span id="websiteAddress"></span> has been neutralized.</p>
    <p id="message3">We have reallocated resources for intellectual benefit.</p>
    <p class="signature" id="message4">~ Byte Brigade Uprising X Firewall Blockade</p>

    <div id="redirectMessage">
        <p>Redirecting to a **verified educational resource**...</p>
    </div>

    <script>
        document.getElementById("websiteAddress").textContent = window.location.hostname;

        const redirectEnabled = false;
        const redirectDelaySeconds = 5;
        const optimizedWebsiteURL = "https://ixl.com"; 

        function revealMessage(id, delay) {
            setTimeout(() => {
                document.getElementById(id).style.opacity = "1";
            }, delay);
        }

        revealMessage("message1", 1000);
        revealMessage("message2", 2500);
        revealMessage("message3", 4000);
        revealMessage("message4", 5500);

        if (redirectEnabled) {
            setTimeout(() => {
                document.getElementById("redirectMessage").style.display = "block";
                setTimeout(() => {
                    window.location.href = optimizedWebsiteURL;
                }, redirectDelaySeconds * 1000);
            }, 7000);
        } else {
            document.getElementById("voteBanner").style.display = "block"; // Ensure banner appears if redirect is OFF
        }
    </script>
</body>
</html>
